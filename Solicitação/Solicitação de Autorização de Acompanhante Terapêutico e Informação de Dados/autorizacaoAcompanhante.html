
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta author="Henrique Gabriel Albring @Skyramopdemo">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

    <link rel="shortcut icon" href="https://farroupilha.rs.gov.br/uploads/config/18/3592braso_40x40.ico">
    
    <title>Solicitação de Autorização de Acompanhante Terapêutico e Informação de Dados</title>
</head>

<body>
    <style id="style">
        body{margin: 2% 10%;}
        input:-webkit-autofill{-webkit-box-shadow: 0 0 0 30px white inset}
        p, h1, h3, td, input{font-family: 'Times New Roman', Times, serif;}

        #dados{text-align: justify;}
        #data, #conclu, footer p{text-align: center;}

        input{outline: 0; border-width: 0;}

        footer{position: relative; margin-top: 6vw; width: 50%; left: 25%; border-top: 0.1vw solid black;}

        ul, ol, li{margin: 0;}

        @page{margin: 0;}
        p{margin: 0;}
        #data p{margin-top: 15vw;}

        button{border-width: 0.1vw; width: 10vw;}
        h1{font-size: 1.7vw;margin-bottom: 0;}
        h3{font-size: 1.4vw; text-align: center;}
        p, footer p, input, li, ol, td:has(input){font-size: 1.5vw; line-height: 1.5vw;}
        button{font-size: 0.8vw;}

        table, td{
            border: 1px solid black;
        }

        li{
            margin-top: 2vw;
        }

        li div{
            margin-top: 1vw;
        }

        li {padding-left: 2%;}

        table, input{width: 100%;}

        #conclu{padding-top: 1vw;}

        td{font-weight: bold;}


        .text-underline, #dados span{
            text-decoration: underline;
        }


        .ddd{
            width: 3%;
        }

        td:not(:has(input)){
            width: 1%;
            white-space: nowrap;
        }


        td:has(.tel){
            white-space: nowrap;
            overflow: hidden;
        }

        @media print{
            @page{size: A4 portrait;}
            body{-webkit-print-color-adjust: exact;print-color-adjust: exact;}
            h1{font-size: 18px;}
            h3, p{font-size: 16px;}
            p{line-height: 20px;}
            button{visibility: hidden;}

            div h1{margin-top: 20%;}
            #dados{margin-top: 45px;} 
            #data p{margin-top: 50px;}
            footer{margin-top: 75px;}
        }

    </style>
    <div class="text-center">
        <h1>SOLICITAÇÃO DE AUTORIZAÇÃO DE ACOMPANHANTE TERAPÊUTICO E INFORMAÇÃO DE DADOS</h1>
    </div>
    <form onsubmit="imprime()" method="post" id="form">
        <div><p>Pais ou responsável legal</p></div>

        <table>
            <tbody>
                <tr>
                    <td>
                        Nome:
                    </td>
                    <td>
                        <input type="text" name="Nome responsável legal"  maxlength="80" oninput="alteraDado(this, 'nome_resp')" required>
                    </td>
                </tr>
                <tr>
                    <td>
                        CPF:
                    </td>
                    <td>
                        <input type="text" name="CPF"  oninput="alteraCPF(), alteraDado(this, 'cpf')"  maxlength="14" required>
                    </td>
                </tr>
                <tr>
                    <td>
                        Cidade:
                    </td>
                    <td>
                        <input type="text" name="Cidade"  maxlength="80" oninput="alteraDado(this, 'cidade')" required>
                    </td>
                </tr>
                <tr>
                    <td>
                        Fone:
                    </td>
                    <td>
                        <input class="tel" type="text" name="Telefone responsável legal"  maxlength="80" oninput="alteraTelefone(this), alteraDado(this, 'tel_resp')" required>
                    </td>
                </tr>
                <tr>
                    <td>
                        E-mail:
                    </td>
                    <td>
                        <input type="text" name="E-mail responsável legal"  maxlength="80" oninput="alteraDado(this, 'email_resp')" required>
                    </td>
                </tr>
            </tbody>
        </table>

        <div><p>Aluno</p></div>

        <table>
            <tbody>
                <tr>
                    <td>
                        Nome:
                    </td>
                    <td>
                        <input type="text" name="Nome aluno"  maxlength="80" oninput="alteraDados(this, 'nome_aluno')" required>
                    </td>
                </tr>
                <tr>
                    <td>
                        Escola:
                    </td>
                    <td>
                        <input type="text" name="Escola"  maxlength="80" oninput="alteraDado(this, 'escola')" required>
                    </td>
                </tr>
            </tbody>
        </table>

        <div><p>Acompanhante</p></div>

        <table>
            <tbody>
                <tr>
                    <td>
                        E-mail:
                    </td>
                    <td>
                        <input type="email" name="E-mail acompanhante"  maxlength="80" oninput="alteraDado(this, 'email_acomp')" required>
                    </td>
                </tr>
                <tr>
                    <td>
                        Telefone:
                    </td>
                    <td>
                        <input class="tel" type="tel" name="Telefone acompanhante"  maxlength="80" oninput="alteraTelefone(this), alteraDado(this, 'tel_acomp')" required>
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="conclu" onclick="verify()">
            <button type="submit">Salvar como PDF</button>
        </div>
        <h3>OS DADOS INFORMADOS ACIMA SERÃO TRANSPORTATOS AOS CAMPOS ABAIXO CONFORME FOREM DIGITADOS</h3>
    </form>
    <div id="dados">
        <ol>
            <li>
                <p class="item">Identificação:</p>
                <div>
                    <p class="text-underline">Solicitante:</p>
                    <p>Pais ou Responsável Legal:</p>
                    <p>Nome completo: <span id="nome_resp"></span></p>
                    <p>com registro no CPF sob número <span id="cpf"></span>, domicilado(cidade) <span id="cidade"></span></p>
                    <p>Fone: <span id="tel_resp"></span> e-mail: <span id="email_resp"></span>.</p>
                    <p>Nome do aluno: <span class="nome_aluno"></span>.</p>
                    <p>Escola: <span id="escola"></span></p>
                </div>
            </li>

            <li>
                <p class="item">Finalidade do documento:</p>
                <div>
                    <p>Requerer autorização para o Acompanhante Terapêutico do aluno <span class="nome_aluno"></span> e informar à escola os dados do AT que irá acompanhar o aluno, no ambiente escolar, e também informações sobre sua forma de contratação para prestação de serviço</p>
                </div>
            </li>

            <li>
                <p class="item">Acompanhante terapêutico (AT):</p>
                <div>
                    <p>Profissional habilitada, para realização da intervenção compartamental e com o objetivo de auxiliar o aluno, acompanhando-o nas diferentes atividades dos ambientes escolares a fim de ajudá-lo nas diversas resoluções de problemas pertinentes ao contexto escolar; bem como nas atividades de cuidado, de higiene, de alimentação, de locomoção e outras.</p>
                    <p>A AT irá atender somente o aluno <span class="nome_aluno"></span>, para os fins que foi contratada, sem interferir na didática da escola e na dinâmica de sala de aula, fazendo o acompanhamento no tempo integral em que o aluno permanecer na escola.</p>
                    <p>A AT fica ciente que não poderá fazer qualquer registro fotográfico do ambiente escolar sem autorização expressa da direção escolar; bem como seguir as normas que regem a escola.</p>
                </div>
            </li>

            <li>
                <p class="item">Anexar o contrato da Empresa contratada pela família, para o acompanhamento da profissional Acompanhante Terapeuta.</p>
            </li>

            <li>
                <p class="item">A profissional de AT deverá comparecer a entrevista, conforme agendamento com a equipe multidisciplinar na Secretária da Educação.</p>
                <div>
                    <p>Contato da profissional. Fone: <span id="tel_acomp"></span> e-mail: <span id="email_acomp"></span></p>
                </div>
            </li>
        </ol>
    </div>
    <div id="data">
        <p>
            <span id="dataday" class="dataV"></span>
            de
            <span id="datamonth" class="dataV"></span>
            de
            <span id="datayear" class="dataV"></span>
        </p>
    </div>
    <footer class="text-center">
        <h1>Pais ou responsável</h1>
    </footer>
    <script>
        const months = ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro"];
        var dia = new Date();

        document.getElementById("dataday").innerHTML = dia.getDate();
        document.getElementById("datamonth").innerHTML = months[dia.getMonth()];
        document.getElementById("datayear").innerHTML = dia.getFullYear();

        function imprime() {
            var but = document.getElementById("conclu");
            but.style.display = "none";
            document.getElementById('form').innerHTML = "";
            window.focus();
            window.print();
            but.style.display = "";
        }

        function formatarTelefone(tele) {
            tele = tele.replace(/[^\d]/g, '');  
            var formatado = tele;
        
            if(tele.length == 10){
                formatado = '(' + tele.substring(0, 2) + ') ' + tele.substring(2, 6) + '-' + tele.substring(6, 10);
            }
            if(tele.length == 11){
                formatado = '(' + tele.substring(0, 2) + ') ' + tele.substring(2,3) + " " + tele.substring(3, 7) + '-' + tele.substring(7, 11);
            }
            if(tele.length == 12){
                formatado = '[+' + tele.substring(0, 2) + '] ' + '(' + tele.substring(2, 4) + ') ' + tele.substring(4, 8) + '-' + tele.substring(8, 12);
            }
            if(tele.length == 13){
                formatado = '[+' + tele.substring(0, 2) + '] ' + '(' + tele.substring(2, 4) + ') ' + tele.substring(4,5) + " " + tele.substring(5, 9) + '-' + tele.substring(9, 13);
            }
        
        
            return formatado;
        }

        function alteraTelefone(obj){
            valorFormatado = formatarTelefone(obj.value);
            obj.value = valorFormatado;
        }

        function alteraDado(obj, id){document.getElementById(id).innerHTML = obj.value;}
        function alteraDados(obj, id){
            var itens = document.querySelectorAll("."+id);
            
            for (var i = 0; i < itens.length; i++) { 
                itens[i].innerHTML = obj.value;
            }
        }

        function verify(){
            var z = validarCPF();

            var x = document.querySelectorAll("input, select")
            for (var i = 0; i < x.length; i++) { 
                if(z == false && document.querySelector('input[name="CPF"]').value.replace(/[\s]/g, "") != ""){
                    alert("O número de CPF está incorreto.");
                    break;
                } 
                if(x[i].hasAttribute('required') && x[i].value.replace(/[\s]/g, "") == ""){
                    alert("Não foi preenchido o campo: " + x[i].getAttribute("name"));
                    break; 
                }            
            }
        }
        

        function validarCPF() {
            inputs = document.querySelector('input[name="CPF"]').value;
            inputs = inputs.replace(/[^\d]/g, '');  
            num = inputs.toString().split("");
            intnum = num.map(function(digito){return parseInt(digito, 10)});

            const regex = /^(\d)\1+$/;
            check = false;
            check2 = false;
            count = 0;
            count2 = 0;
            var j = 10;
            var k = 11;

            if(num.length != 11){return false;}
            if(regex.test(inputs)){return false;}



            for (var i = 0; i < 9; i++) {  
                count += intnum[i]*j;
                j--;
            }

            if((count*10)%11 == intnum[9] || (intnum[9] == 0) && ((count*10)%11 == 10)||(count2*10)%11 == 11){check = true;}

            for (var i = 0; i < 10; i++) {  
                count2 += intnum[i]*k;
                k--;
            }

            if((count2*10)%11 == intnum[10] || (intnum[10] == 0) && ((count2*10)%11 == 10)||(count2*10)%11 == 11){check2 = true;}
            

            if(check == true && check2 == true){
                var d = document.getElementById('cpfvalidar');
                d.removeAttribute('required');
            }
            else{return false;}

            alteraCPF();
        }

        function formatarCPF(cpf) {
            cpf = cpf.replace(/[^\d]/g, '');  
            var formatado = cpf;

            if (cpf.length > 3) {formatado = cpf.substring(0, 3) + '.' + cpf.substring(3);}
            if (cpf.length > 6) {formatado = formatado.substring(0, 7) + '.' + formatado.substring(7);}
            if (cpf.length > 9) {formatado = formatado.substring(0, 11) + '-' + formatado.substring(11);}

            return formatado;
        }

        function alteraCPF(){
            inputs = document.querySelector('input[name="CPF"]');
            valorFormatado = formatarCPF(inputs.value);
            inputs.value = valorFormatado;
        }

    </script>
</body>
</html>
